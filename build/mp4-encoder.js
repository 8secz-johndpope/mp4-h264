
var loadMP4H264Encoder = (function() {
  var _scriptDir = import.meta.url;
  
  return (
function(loadMP4H264Encoder) {
  loadMP4H264Encoder = loadMP4H264Encoder || {};


var d;d||(d=typeof loadMP4H264Encoder !== 'undefined' ? loadMP4H264Encoder : {});var aa,ba;d.ready=new Promise(function(a,b){aa=a;ba=b});function ca(){let a=0,b=0,c=new Uint8Array(256);return{contents:function(){return c.slice(0,b)},seek:function(e){a=e},write:function(e,f,g){var l=a+g,h=c.length;h>=l||(l=Math.max(l,h*(1048576>h?2:1.125)>>>0),0!=h&&(l=Math.max(l,256)),h=c,c=new Uint8Array(l),0<b&&c.set(h.subarray(0,b),0));c.set(e.subarray(f,f+g),a);a+=g;b=Math.max(b,a);return g}}}
d.create=function(a={}){function b(){null!=h||u||(h=d.create_buffer(e*f*3/2));return h}function c(){null!=n||u||(n=d.create_buffer(e*f*g));return n}const e=a.width,f=a.height,g=a.stride||4;if(!e||!f)throw Error("width and height must be > 0");const l=ca();let h=null,n=null,u=!1;a=Object.assign({},a);delete a.stride;const t=d.create_encoder(a,function(q,v,x){l.seek(x);return l.write(d.HEAPU8,q,v)!=v});return{memory:function(){return d.HEAPU8},getYUVPointer:b,getRGBPointer:c,end:function(){if(u)throw Error("Attempting to end() an encoder that is already finished");
u=!0;d.finalize_encoder(t);null!=h&&d.free_buffer(h);null!=n&&d.free_buffer(n);return l.contents()},encodeRGBPointer:function(){const q=c(),v=b();d.encode_rgb(t,q,g,v)},encodeYUVPointer:function(){const q=b();d.encode_yuv(t,q)},encodeRGB:function(q){if(q.length!==e*f*g)throw Error("Expected buffer to be sized (width * height * "+g+")");const v=c(),x=b();d.HEAPU8.set(q,v);d.encode_rgb(t,v,g,x)},encodeYUV:function(q){if(q.length!==e*f*3/2)throw Error("Expected buffer to be sized (width * height * 3) / 2");
const v=b();d.HEAPU8.set(q,v);d.encode_yuv(t,v)}}};d.locateFile=function(a,b){d.simd&&(a=a.replace(/\.wasm$/i,".simd.wasm"));return d.getWasmPath?d.getWasmPath(a,b,d.simd):b+a};var k={},m;for(m in d)d.hasOwnProperty(m)&&(k[m]=d[m]);var da=!1,p=!1,ea=!1;da="object"===typeof window;p="function"===typeof importScripts;ea="object"===typeof process&&"object"===typeof process.ob&&"string"===typeof process.ob.node;var w=d.ENVIRONMENT_IS_PTHREAD||!1;w&&(y=d.buffer);var z="";
function fa(a){return d.locateFile?d.locateFile(a,z):z+a}var ha;if(da||p)p?z=self.location.href:"undefined"!==typeof document&&document.currentScript&&(z=document.currentScript.src),_scriptDir&&(z=_scriptDir),0!==z.indexOf("blob:")?z=z.substr(0,z.lastIndexOf("/")+1):z="",p&&(ha=function(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)});var ia=d.print||console.log.bind(console),A=d.printErr||console.warn.bind(console);
for(m in k)k.hasOwnProperty(m)&&(d[m]=k[m]);k=null;var B;d.wasmBinary&&(B=d.wasmBinary);var noExitRuntime;d.noExitRuntime&&(noExitRuntime=d.noExitRuntime);"object"!==typeof WebAssembly&&C("no native wasm support detected");var D,ja,threadInfoStruct=0,selfThreadId=0,ka=!1;function la(a,b){a||C("Assertion failed: "+b)}
function E(a,b){var c=F;b=a+b;for(var e="";!(a>=b);){var f=c[a++];if(!f)break;if(f&128){var g=c[a++]&63;if(192==(f&224))e+=String.fromCharCode((f&31)<<6|g);else{var l=c[a++]&63;f=224==(f&240)?(f&15)<<12|g<<6|l:(f&7)<<18|g<<12|l<<6|c[a++]&63;65536>f?e+=String.fromCharCode(f):(f-=65536,e+=String.fromCharCode(55296|f>>10,56320|f&1023))}}else e+=String.fromCharCode(f)}return e}
function ma(a,b,c){var e=F;if(0<c){c=b+c-1;for(var f=0;f<a.length;++f){var g=a.charCodeAt(f);if(55296<=g&&57343>=g){var l=a.charCodeAt(++f);g=65536+((g&1023)<<10)|l&1023}if(127>=g){if(b>=c)break;e[b++]=g}else{if(2047>=g){if(b+1>=c)break;e[b++]=192|g>>6}else{if(65535>=g){if(b+2>=c)break;e[b++]=224|g>>12}else{if(b+3>=c)break;e[b++]=240|g>>18;e[b++]=128|g>>12&63}e[b++]=128|g>>6&63}e[b++]=128|g&63}}e[b]=0}}
function na(a){for(var b=0,c=0;c<a.length;++c){var e=a.charCodeAt(c);55296<=e&&57343>=e&&(e=65536+((e&1023)<<10)|a.charCodeAt(++c)&1023);127>=e?++b:b=2047>=e?b+2:65535>=e?b+3:b+4}return b}function oa(a,b){for(var c="",e=0;!(e>=b/2);++e){var f=G[a+2*e>>1];if(0==f)break;c+=String.fromCharCode(f)}return c}function pa(a,b,c){void 0===c&&(c=2147483647);if(2>c)return 0;c-=2;var e=b;c=c<2*a.length?c/2:a.length;for(var f=0;f<c;++f)G[b>>1]=a.charCodeAt(f),b+=2;G[b>>1]=0;return b-e}
function qa(a){return 2*a.length}function ra(a,b){for(var c=0,e="";!(c>=b/4);){var f=H[a+4*c>>2];if(0==f)break;++c;65536<=f?(f-=65536,e+=String.fromCharCode(55296|f>>10,56320|f&1023)):e+=String.fromCharCode(f)}return e}function sa(a,b,c){void 0===c&&(c=2147483647);if(4>c)return 0;var e=b;c=e+c-4;for(var f=0;f<a.length;++f){var g=a.charCodeAt(f);if(55296<=g&&57343>=g){var l=a.charCodeAt(++f);g=65536+((g&1023)<<10)|l&1023}H[b>>2]=g;b+=4;if(b+4>c)break}H[b>>2]=0;return b-e}
function ta(a){for(var b=0,c=0;c<a.length;++c){var e=a.charCodeAt(c);55296<=e&&57343>=e&&++c;b+=4}return b}var y,I,F,G,ua,H,J,va,wa,xa=d.INITIAL_MEMORY||52428800;
if(w)D=d.wasmMemory,y=d.buffer;else if(d.wasmMemory)D=d.wasmMemory;else if(D=new WebAssembly.Memory({initial:xa/65536,maximum:xa/65536,shared:!0}),!(D.buffer instanceof SharedArrayBuffer))throw A("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),ea&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),
Error("bad memory");D&&(y=D.buffer);xa=y.byteLength;var K=y;y=K;d.HEAP8=I=new Int8Array(K);d.HEAP16=G=new Int16Array(K);d.HEAP32=H=new Int32Array(K);d.HEAPU8=F=new Uint8Array(K);d.HEAPU16=ua=new Uint16Array(K);d.HEAPU32=J=new Uint32Array(K);d.HEAPF32=va=new Float32Array(K);d.HEAPF64=wa=new Float64Array(K);var ya,za=[],Aa=[],Ba=[],Ca=[];function Da(){var a=d.preRun.shift();za.unshift(a)}var L=0,Ea=null,Fa=null;d.preloadedImages={};d.preloadedAudios={};
function C(a){if(d.onAbort)d.onAbort(a);w&&console.error("Pthread aborting at "+Error().stack);A(a);ka=!0;a=new WebAssembly.RuntimeError("abort("+a+"). Build with -s ASSERTIONS=1 for more info.");ba(a);throw a;}function Ga(){var a=M;return String.prototype.startsWith?a.startsWith("data:application/octet-stream;base64,"):0===a.indexOf("data:application/octet-stream;base64,")}var M="mp4-encoder.wasm";Ga()||(M=fa(M));
function Ha(){try{if(B)return new Uint8Array(B);if(ha)return ha(M);throw"both async and sync fetching of the wasm failed";}catch(a){C(a)}}function Ia(){return B||!da&&!p||"function"!==typeof fetch?Promise.resolve().then(Ha):fetch(M,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+M+"'";return a.arrayBuffer()}).catch(function(){return Ha()})}var Ka={8988:function(a,b){setTimeout(function(){Ja(a,b)},0)}};
function La(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b)b(d);else{var c=b.Za;"number"===typeof c?void 0===b.Da?ya.get(c)():ya.get(c)(b.Da):c(void 0===b.Da?null:b.Da)}}}function Ma(a,b,c){var e;-1!=a.indexOf("j")?e=c&&c.length?d["dynCall_"+a].apply(null,[b].concat(c)):d["dynCall_"+a].call(null,b):e=ya.get(b).apply(null,c);return e}d.dynCall=Ma;var N=0,Na=0,Oa=0;function Pa(a,b,c){N=a|0;Oa=b|0;Na=c|0}d.registerPthreadPtr=Pa;
function Qa(a,b){if(0>=a||a>I.length||a&1||0>b)return-28;if(0==b)return 0;2147483647<=b&&(b=Infinity);var c=Atomics.load(H,O.Aa>>2),e=0;if(c==a&&Atomics.compareExchange(H,O.Aa>>2,c,0)==c&&(--b,e=1,0>=b))return 1;a=Atomics.notify(H,a>>2,b);if(0<=a)return a+e;throw"Atomics.notify returned an unexpected value "+a;}d._emscripten_futex_wake=Qa;
var O={pb:1,xb:{Sa:0,Ta:0},wa:[],ya:[],vb:function(){},cb:function(){O.ta=P(232);for(var a=0;58>a;++a)J[O.ta/4+a]=0;H[O.ta+12>>2]=O.ta;a=O.ta+156;H[a>>2]=a;var b=P(512);for(a=0;128>a;++a)J[b/4+a]=0;Atomics.store(J,O.ta+104>>2,b);Atomics.store(J,O.ta+40>>2,O.ta);Atomics.store(J,O.ta+44>>2,42);O.Pa();Pa(O.ta,!p,1);Ra(O.ta)},eb:function(){O.Pa();aa(d);O.receiveObjectTransfer=O.ib;O.setThreadStatus=O.jb;O.threadCancel=O.lb;O.threadExit=O.mb},Pa:function(){O.Aa=Sa},va:{},Va:[],jb:function(){},Ra:function(){for(;0<
O.Va.length;)O.Va.pop()();w&&threadInfoStruct&&Ta()},mb:function(a){var b=N|0;b&&(Atomics.store(J,b+4>>2,a),Atomics.store(J,b+0>>2,1),Atomics.store(J,b+60>>2,1),Atomics.store(J,b+64>>2,0),O.Ra(),Qa(b+0,2147483647),Pa(0,0,0),threadInfoStruct=0,w&&postMessage({cmd:"exit"}))},lb:function(){O.Ra();Atomics.store(J,threadInfoStruct+4>>2,-1);Atomics.store(J,threadInfoStruct+0>>2,1);Qa(threadInfoStruct+0,2147483647);threadInfoStruct=selfThreadId=0;Pa(0,0,0);postMessage({cmd:"cancelDone"})},Eb:function(){for(var a in O.va){var b=
O.va[a];b&&b.worker&&O.Ia(b.worker)}O.va={};for(a=0;a<O.wa.length;++a){var c=O.wa[a];c.terminate()}O.wa=[];for(a=0;a<O.ya.length;++a)c=O.ya[a],b=c.sa,O.La(b),c.terminate();O.ya=[]},La:function(a){if(a){if(a.threadInfoStruct){var b=H[a.threadInfoStruct+104>>2];H[a.threadInfoStruct+104>>2]=0;Q(b);Q(a.threadInfoStruct)}a.threadInfoStruct=0;a.Ja&&a.za&&Q(a.za);a.za=0;a.worker&&(a.worker.sa=null)}},Ia:function(a){delete O.va[a.sa.Ua];O.wa.push(a);O.ya.splice(O.ya.indexOf(a),1);O.La(a.sa);a.sa=void 0},
ib:function(){},fb:function(a,b){a.onmessage=function(c){var e=c.data,f=e.cmd;a.sa&&(O.Ka=a.sa.threadInfoStruct);if(e.targetThread&&e.targetThread!=(N|0)){var g=O.va[e.Db];g?g.worker.postMessage(c.data,e.transferList):console.error('Internal error! Worker sent a message "'+f+'" to target pthread '+e.targetThread+", but that thread no longer exists!")}else if("processQueuedMainThreadWork"===f)Ua();else if("spawnThread"===f)Va(c.data);else if("cleanupThread"===f){c=e.thread;if(w)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";
if(!c)throw"Internal Error! Null pthread_ptr in cleanupThread!";H[c+12>>2]=0;(c=O.va[c])&&O.Ia(c.worker)}else if("killThread"===f){c=e.thread;if(w)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!c)throw"Internal Error! Null pthread_ptr in killThread!";H[c+12>>2]=0;c=O.va[c];c.worker.terminate();O.La(c);O.ya.splice(O.ya.indexOf(c.worker),1);c.worker.sa=void 0}else if("cancelThread"===f){c=e.thread;if(w)throw"Internal Error! cancelThread() can only ever be called from main application thread!";
if(!c)throw"Internal Error! Null pthread_ptr in cancelThread!";O.va[c].worker.postMessage({cmd:"cancel"})}else"loaded"===f?(a.loaded=!0,b&&b(a),a.Ea&&(a.Ea(),delete a.Ea)):"print"===f?ia("Thread "+e.threadId+": "+e.text):"printErr"===f?A("Thread "+e.threadId+": "+e.text):"alert"===f?alert("Thread "+e.threadId+": "+e.text):"exit"===f?a.sa&&Atomics.load(J,a.sa.Ua+68>>2)&&O.Ia(a):"cancelDone"===f?O.Ia(a):"objectTransfer"!==f&&("setimmediate"===c.data.target?a.postMessage(c.data):A("worker sent an unknown command "+
f));O.Ka=void 0};a.onerror=function(c){A("pthread sent an error! "+c.filename+":"+c.lineno+": "+c.message)};a.postMessage({cmd:"load",urlOrBlob:d.mainScriptUrlOrBlob||_scriptDir,wasmMemory:D,wasmModule:ja})},Wa:function(){var a=fa("mp4-encoder.worker.js");O.wa.push(new Worker(a))},$a:function(){0==O.wa.length&&(O.Wa(),O.fb(O.wa[0]));return 0<O.wa.length?O.wa.pop():null},qb:function(a){for(a=performance.now()+a;performance.now()<a;);}};d.establishStackSpace=function(a,b){Wa(a,b);Xa(a)};
d.getNoExitRuntime=function(){return noExitRuntime};var Ya;Ya=w?function(){return performance.now()-d.__performance_now_clock_drift}:function(){return performance.now()};function Za(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+a);}}var $a=void 0;function S(a){for(var b="";F[a];)b+=$a[F[a++]];return b}var T={},U={},ab={};
function bb(a){if(void 0===a)return"_unknown";a=a.replace(/[^a-zA-Z0-9_]/g,"$");var b=a.charCodeAt(0);return 48<=b&&57>=b?"_"+a:a}function cb(a,b){a=bb(a);return(new Function("body","return function "+a+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n'))(b)}
function db(a){var b=Error,c=cb(a,function(e){this.name=a;this.message=e;e=Error(e).stack;void 0!==e&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))});c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message};return c}var eb=void 0;function V(a){throw new eb(a);}var fb=void 0;
function gb(a,b){function c(h){h=b(h);if(h.length!==e.length)throw new fb("Mismatched type converter count");for(var n=0;n<e.length;++n)X(e[n],h[n])}var e=[];e.forEach(function(h){ab[h]=a});var f=Array(a.length),g=[],l=0;a.forEach(function(h,n){U.hasOwnProperty(h)?f[n]=U[h]:(g.push(h),T.hasOwnProperty(h)||(T[h]=[]),T[h].push(function(){f[n]=U[h];++l;l===g.length&&c(f)}))});0===g.length&&c(f)}
function X(a,b,c){c=c||{};if(!("argPackAdvance"in b))throw new TypeError("registerType registeredInstance requires argPackAdvance");var e=b.name;a||V('type "'+e+'" must have a positive integer typeid pointer');if(U.hasOwnProperty(a)){if(c.ab)return;V("Cannot register type '"+e+"' twice")}U[a]=b;delete ab[a];T.hasOwnProperty(a)&&(b=T[a],delete T[a],b.forEach(function(f){f()}))}var hb=[],Y=[{},{value:void 0},{value:null},{value:!0},{value:!1}];
function ib(a){4<a&&0===--Y[a].Ma&&(Y[a]=void 0,hb.push(a))}function Z(a){switch(a){case void 0:return 1;case null:return 2;case !0:return 3;case !1:return 4;default:var b=hb.length?hb.pop():Y.length;Y[b]={Ma:1,value:a};return b}}function jb(a){return this.fromWireType(J[a>>2])}function kb(a){if(null===a)return"null";var b=typeof a;return"object"===b||"array"===b||"function"===b?a.toString():""+a}
function lb(a,b){switch(b){case 2:return function(c){return this.fromWireType(va[c>>2])};case 3:return function(c){return this.fromWireType(wa[c>>3])};default:throw new TypeError("Unknown float type: "+a);}}function mb(a){var b=Function;if(!(b instanceof Function))throw new TypeError("new_ called with constructor type "+typeof b+" which is not a function");var c=cb(b.name||"unknownFunctionName",function(){});c.prototype=b.prototype;c=new c;a=b.apply(c,a);return a instanceof Object?a:c}
function nb(a){for(;a.length;){var b=a.pop();a.pop()(b)}}function ob(a,b){var c=d;if(void 0===c[a].ua){var e=c[a];c[a]=function(){c[a].ua.hasOwnProperty(arguments.length)||V("Function '"+b+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+c[a].ua+")!");return c[a].ua[arguments.length].apply(this,arguments)};c[a].ua=[];c[a].ua[e.Xa]=e}}
function pb(a,b,c){d.hasOwnProperty(a)?((void 0===c||void 0!==d[a].ua&&void 0!==d[a].ua[c])&&V("Cannot register public name '"+a+"' twice"),ob(a,a),d.hasOwnProperty(c)&&V("Cannot register multiple overloads of a function with the same number of arguments ("+c+")!"),d[a].ua[c]=b):(d[a]=b,void 0!==c&&(d[a].Ab=c))}function qb(a,b){for(var c=[],e=0;e<a;e++)c.push(H[(b>>2)+e]);return c}
function rb(a,b){la(0<=a.indexOf("j"),"getDynCaller should only be called with i64 sigs");var c=[];return function(){c.length=arguments.length;for(var e=0;e<arguments.length;e++)c[e]=arguments[e];return Ma(a,b,c)}}function sb(a,b){a=S(a);var c=-1!=a.indexOf("j")?rb(a,b):ya.get(b);"function"!==typeof c&&V("unknown function pointer with signature "+a+": "+b);return c}var tb=void 0;function wb(a){a=xb(a);var b=S(a);Q(a);return b}
function yb(a,b){function c(g){f[g]||U[g]||(ab[g]?ab[g].forEach(c):(e.push(g),f[g]=!0))}var e=[],f={};b.forEach(c);throw new tb(a+": "+e.map(wb).join([", "]));}function zb(a,b,c){switch(b){case 0:return c?function(e){return I[e]}:function(e){return F[e]};case 1:return c?function(e){return G[e>>1]}:function(e){return ua[e>>1]};case 2:return c?function(e){return H[e>>2]}:function(e){return J[e>>2]};default:throw new TypeError("Unknown integer type: "+a);}}
function Ab(a){a||V("Cannot use deleted val. handle = "+a);return Y[a].value}function Bb(a,b){var c=U[a];void 0===c&&V(b+" has unknown type "+wb(a));return c}var Cb={};function Db(a,b){for(var c=arguments.length-2,e=Eb(),f=Fb(8*c),g=f>>3,l=0;l<c;l++)wa[g+l]=arguments[2+l];c=Gb(a,c,f,b);Xa(e);return c}var Hb=[],Ib=[],Jb=[0,"undefined"!==typeof document?document:0,"undefined"!==typeof window?window:0];
function Kb(a){a=2<a?a?E(a,void 0):"":a;return Jb[a]||("undefined"!==typeof document?document.querySelector(a):void 0)}
function Lb(a,b,c){var e=Kb(a);if(!e)return-4;e.Ha&&(H[e.Ha>>2]=b,H[e.Ha+4>>2]=c);if(e.Qa||!e.sb)e.Qa&&(e=e.Qa),a=!1,e.Ga&&e.Ga.Fa&&(a=e.Ga.Fa.getParameter(2978),a=0===a[0]&&0===a[1]&&a[2]===e.width&&a[3]===e.height),e.width=b,e.height=c,a&&e.Ga.Fa.viewport(0,0,b,c);else{if(e.Ha){a=a?a?E(a,void 0):"":"";e=H[e.Ha+8>>2];var f=Eb(),g=Fb(12),l=0;if(a){l=na(a)+1;var h=P(l);ma(a,h,l);l=h}H[g>>2]=l;H[g+4>>2]=b;H[g+8>>2]=c;Mb(0,e,657457152,0,l,g);Xa(f);return 1}return-4}return 0}
function Nb(a,b,c){return w?Db(1,1,a,b,c):Lb(a,b,c)}function Ob(a){var b=a.getExtension("ANGLE_instanced_arrays");b&&(a.vertexAttribDivisor=function(c,e){b.vertexAttribDivisorANGLE(c,e)},a.drawArraysInstanced=function(c,e,f,g){b.drawArraysInstancedANGLE(c,e,f,g)},a.drawElementsInstanced=function(c,e,f,g,l){b.drawElementsInstancedANGLE(c,e,f,g,l)})}
function Pb(a){var b=a.getExtension("OES_vertex_array_object");b&&(a.createVertexArray=function(){return b.createVertexArrayOES()},a.deleteVertexArray=function(c){b.deleteVertexArrayOES(c)},a.bindVertexArray=function(c){b.bindVertexArrayOES(c)},a.isVertexArray=function(c){return b.isVertexArrayOES(c)})}function Qb(a){var b=a.getExtension("WEBGL_draw_buffers");b&&(a.drawBuffers=function(c,e){b.drawBuffersWEBGL(c,e)})}
function Rb(a){a||(a=Sb);if(!a.bb){a.bb=!0;var b=a.Fa;Ob(b);Pb(b);Qb(b);b.tb=b.getExtension("EXT_disjoint_timer_query");b.zb=b.getExtension("WEBGL_multi_draw");var c="OES_texture_float OES_texture_half_float OES_standard_derivatives OES_vertex_array_object WEBGL_compressed_texture_s3tc WEBGL_depth_texture OES_element_index_uint EXT_texture_filter_anisotropic EXT_frag_depth WEBGL_draw_buffers ANGLE_instanced_arrays OES_texture_float_linear OES_texture_half_float_linear EXT_blend_minmax EXT_shader_texture_lod EXT_texture_norm16 WEBGL_compressed_texture_pvrtc EXT_color_buffer_half_float WEBGL_color_buffer_float EXT_sRGB WEBGL_compressed_texture_etc1 EXT_disjoint_timer_query WEBGL_compressed_texture_etc WEBGL_compressed_texture_astc EXT_color_buffer_float WEBGL_compressed_texture_s3tc_srgb EXT_disjoint_timer_query_webgl2 WEBKIT_WEBGL_compressed_texture_pvrtc".split(" ");
(b.getSupportedExtensions()||[]).forEach(function(e){-1!=c.indexOf(e)&&b.getExtension(e)})}}var Sb,Tb=["default","low-power","high-performance"];
function Va(a){if(w)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var b=O.$a();if(void 0!==b.sa)throw"Internal error!";if(!a.Ba)throw"Internal error, no pthread ptr!";O.ya.push(b);for(var c=P(512),e=0;128>e;++e)H[c+4*e>>2]=0;var f=a.za+a.Ca;e=O.va[a.Ba]={worker:b,za:a.za,Ca:a.Ca,Ja:a.Ja,Ua:a.Ba,threadInfoStruct:a.Ba};var g=e.threadInfoStruct>>2;Atomics.store(J,g,0);Atomics.store(J,g+1,0);Atomics.store(J,g+2,0);Atomics.store(J,g+17,a.Na);Atomics.store(J,
g+26,c);Atomics.store(J,g+12,0);Atomics.store(J,g+10,e.threadInfoStruct);Atomics.store(J,g+11,42);Atomics.store(J,g+27,a.Ca);Atomics.store(J,g+21,a.Ca);Atomics.store(J,g+20,f);Atomics.store(J,g+29,f);Atomics.store(J,g+30,a.Na);Atomics.store(J,g+32,a.Sa);Atomics.store(J,g+33,a.Ta);c=Ub()+40;Atomics.store(J,g+44,c);b.sa=e;var l={cmd:"run",start_routine:a.kb,arg:a.Da,threadInfoStruct:a.Ba,selfThreadId:a.Ba,parentThreadId:a.hb,stackBase:a.za,stackSize:a.Ca};b.Ea=function(){l.time=performance.now();b.postMessage(l,
a.nb)};b.loaded&&(b.Ea(),delete b.Ea)}function Vb(){return N|0}d._pthread_self=Vb;for(var Wb=Array(256),Xb=0;256>Xb;++Xb)Wb[Xb]=String.fromCharCode(Xb);$a=Wb;eb=d.BindingError=db("BindingError");fb=d.InternalError=db("InternalError");d.count_emval_handles=function(){for(var a=0,b=5;b<Y.length;++b)void 0!==Y[b]&&++a;return a};d.get_first_emval=function(){for(var a=5;a<Y.length;++a)if(void 0!==Y[a])return Y[a];return null};tb=d.UnboundTypeError=db("UnboundTypeError");var Yb=[null,Nb];w||Aa.push({Za:function(){Zb()}});
var bc={b:function(a,b,c,e){C("Assertion failed: "+(a?E(a,void 0):"")+", at: "+[b?b?E(b,void 0):"":"unknown filename",c,e?e?E(e,void 0):"":"unknown function"])},K:function(a,b,c,e,f){var g=Za(c);b=S(b);X(a,{name:b,fromWireType:function(l){return!!l},toWireType:function(l,h){return h?e:f},argPackAdvance:8,readValueFromPointer:function(l){if(1===c)var h=I;else if(2===c)h=G;else if(4===c)h=H;else throw new TypeError("Unknown boolean type size: "+b);return this.fromWireType(h[l>>g])},xa:null})},J:function(a,
b){b=S(b);X(a,{name:b,fromWireType:function(c){var e=Y[c].value;ib(c);return e},toWireType:function(c,e){return Z(e)},argPackAdvance:8,readValueFromPointer:jb,xa:null})},w:function(a,b,c){c=Za(c);b=S(b);X(a,{name:b,fromWireType:function(e){return e},toWireType:function(e,f){if("number"!==typeof f&&"boolean"!==typeof f)throw new TypeError('Cannot convert "'+kb(f)+'" to '+this.name);return f},argPackAdvance:8,readValueFromPointer:lb(b,c),xa:null})},m:function(a,b,c,e,f,g){var l=qb(b,c);a=S(a);f=sb(e,
f);pb(a,function(){yb("Cannot call "+a+" due to unbound types",l)},b-1);gb(l,function(h){var n=a,u=a;h=[h[0],null].concat(h.slice(1));var t=f,q=h.length;2>q&&V("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var v=null!==h[1]&&!1,x=!1,r=1;r<h.length;++r)if(null!==h[r]&&void 0===h[r].xa){x=!0;break}var ub="void"!==h[0].name,R="",W="";for(r=0;r<q-2;++r)R+=(0!==r?", ":"")+"arg"+r,W+=(0!==r?", ":"")+"arg"+r+"Wired";u="return function "+bb(u)+"("+R+") {\nif (arguments.length !== "+
(q-2)+") {\nthrowBindingError('function "+u+" called with ' + arguments.length + ' arguments, expected "+(q-2)+" args!');\n}\n";x&&(u+="var destructors = [];\n");var vb=x?"destructors":"null";R="throwBindingError invoker fn runDestructors retType classParam".split(" ");t=[V,t,g,nb,h[0],h[1]];v&&(u+="var thisWired = classParam.toWireType("+vb+", this);\n");for(r=0;r<q-2;++r)u+="var arg"+r+"Wired = argType"+r+".toWireType("+vb+", arg"+r+"); // "+h[r+2].name+"\n",R.push("argType"+r),t.push(h[r+2]);v&&
(W="thisWired"+(0<W.length?", ":"")+W);u+=(ub?"var rv = ":"")+"invoker(fn"+(0<W.length?", ":"")+W+");\n";if(x)u+="runDestructors(destructors);\n";else for(r=v?1:2;r<h.length;++r)q=1===r?"thisWired":"arg"+(r-2)+"Wired",null!==h[r].xa&&(u+=q+"_dtor("+q+"); // "+h[r].name+"\n",R.push(q+"_dtor"),t.push(h[r].xa));ub&&(u+="var ret = retType.fromWireType(rv);\nreturn ret;\n");R.push(u+"}\n");h=mb(R).apply(null,t);r=b-1;if(!d.hasOwnProperty(n))throw new fb("Replacing nonexistant public symbol");void 0!==
d[n].ua&&void 0!==r?d[n].ua[r]=h:(d[n]=h,d[n].Xa=r);return[]})},l:function(a,b,c,e,f){function g(u){return u}b=S(b);-1===f&&(f=4294967295);var l=Za(c);if(0===e){var h=32-8*c;g=function(u){return u<<h>>>h}}var n=-1!=b.indexOf("unsigned");X(a,{name:b,fromWireType:g,toWireType:function(u,t){if("number"!==typeof t&&"boolean"!==typeof t)throw new TypeError('Cannot convert "'+kb(t)+'" to '+this.name);if(t<e||t>f)throw new TypeError('Passing a number "'+kb(t)+'" from JS side to C/C++ side to an argument of type "'+
b+'", which is outside the valid range ['+e+", "+f+"]!");return n?t>>>0:t|0},argPackAdvance:8,readValueFromPointer:zb(b,l,0!==e),xa:null})},j:function(a,b,c){function e(g){g>>=2;return new f(y,J[g+1],J[g])}var f=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];c=S(c);X(a,{name:c,fromWireType:e,argPackAdvance:8,readValueFromPointer:e},{ab:!0})},x:function(a,b){b=S(b);var c="std::string"===b;X(a,{name:b,fromWireType:function(e){var f=J[e>>2];if(c)for(var g=
e+4,l=0;l<=f;++l){var h=e+4+l;if(l==f||0==F[h]){g=g?E(g,h-g):"";if(void 0===n)var n=g;else n+=String.fromCharCode(0),n+=g;g=h+1}}else{n=Array(f);for(l=0;l<f;++l)n[l]=String.fromCharCode(F[e+4+l]);n=n.join("")}Q(e);return n},toWireType:function(e,f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));var g="string"===typeof f;g||f instanceof Uint8Array||f instanceof Uint8ClampedArray||f instanceof Int8Array||V("Cannot pass non-string to std::string");var l=(c&&g?function(){return na(f)}:function(){return f.length})(),
h=P(4+l+1);J[h>>2]=l;if(c&&g)ma(f,h+4,l+1);else if(g)for(g=0;g<l;++g){var n=f.charCodeAt(g);255<n&&(Q(h),V("String has UTF-16 code units that do not fit in 8 bits"));F[h+4+g]=n}else for(g=0;g<l;++g)F[h+4+g]=f[g];null!==e&&e.push(Q,h);return h},argPackAdvance:8,readValueFromPointer:jb,xa:function(e){Q(e)}})},s:function(a,b,c){c=S(c);if(2===b){var e=oa;var f=pa;var g=qa;var l=function(){return ua};var h=1}else 4===b&&(e=ra,f=sa,g=ta,l=function(){return J},h=2);X(a,{name:c,fromWireType:function(n){for(var u=
J[n>>2],t=l(),q,v=n+4,x=0;x<=u;++x){var r=n+4+x*b;if(x==u||0==t[r>>h])v=e(v,r-v),void 0===q?q=v:(q+=String.fromCharCode(0),q+=v),v=r+b}Q(n);return q},toWireType:function(n,u){"string"!==typeof u&&V("Cannot pass non-string to C++ string type "+c);var t=g(u),q=P(4+t+b);J[q>>2]=t>>h;f(u,q+4,t+b);null!==n&&n.push(Q,q);return q},argPackAdvance:8,readValueFromPointer:jb,xa:function(n){Q(n)}})},L:function(a,b){b=S(b);X(a,{wb:!0,name:b,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},
F:function(a,b){if(a==b)postMessage({cmd:"processQueuedMainThreadWork"});else if(w)postMessage({targetThread:a,cmd:"processThreadQueue"});else{a=(a=O.va[a])&&a.worker;if(!a)return;a.postMessage({cmd:"processThreadQueue"})}return 1},f:function(a,b,c){a=Ab(a);b=Bb(b,"emval::as");var e=[],f=Z(e);H[c>>2]=f;return b.toWireType(e,a)},r:function(a,b,c,e){a=Ab(a);for(var f=Array(b),g=0;g<b;++g)f[g]=Bb(H[(c>>2)+g],"parameter "+g);c=Array(b);for(g=0;g<b;++g){var l=f[g];c[g]=l.readValueFromPointer(e);e+=l.argPackAdvance}a=
a.apply(void 0,c);return Z(a)},c:ib,g:function(a,b){a=Ab(a);b=Ab(b);return Z(a[b])},d:function(a){4<a&&(Y[a].Ma+=1)},h:function(a){var b=Cb[a];return Z(void 0===b?S(a):b)},e:function(a){nb(Y[a].value);ib(a)},k:function(a,b){a=Bb(a,"_emval_take_value");a=a.readValueFromPointer(b);return Z(a)},y:function(a){a=Ab(a);return Z(typeof a)},v:function(){C()},G:function(a,b,c){Ib.length=0;var e;for(c>>=2;e=F[b++];)(e=105>e)&&c&1&&c++,Ib.push(e?wa[c++>>1]:H[c]),++c;return Ka[a].apply(null,Ib)},u:function(){},
n:function(a,b,c){if(0>=a||a>I.length||a&1)return-28;if(da){if(Atomics.load(H,a>>2)!=b)return-6;var e=performance.now();c=e+c;for(Atomics.exchange(H,O.Aa>>2,a);;){e=performance.now();if(e>c)return Atomics.exchange(H,O.Aa>>2,0),-73;e=Atomics.exchange(H,O.Aa>>2,0);if(0==e)break;Ua();if(Atomics.load(H,a>>2)!=b)return-6;Atomics.exchange(H,O.Aa>>2,a)}return 0}a=Atomics.wait(H,a>>2,b,c);if("timed-out"===a)return-73;if("not-equal"===a)return-6;if("ok"===a)return 0;throw"Atomics.wait returned an unexpected value "+
a;},q:Qa,o:Ya,p:function(){return Oa|0},H:function(){return Na|0},A:function(a,b,c){F.copyWithin(a,b,b+c)},B:function(a,b,c){Hb.length=b;c>>=3;for(var e=0;e<b;e++)Hb[e]=wa[c+e];return(0>a?Ka[-a-1]:Yb[a]).apply(null,Hb)},I:function(){C("OOM")},D:function(a,b,c){return Kb(a)?Lb(a,b,c):Nb(a,b,c)},t:function(){},E:function(a,b){b>>=2;b={alpha:!!H[b],depth:!!H[b+1],stencil:!!H[b+2],antialias:!!H[b+3],premultipliedAlpha:!!H[b+4],preserveDrawingBuffer:!!H[b+5],powerPreference:Tb[H[b+6]],failIfMajorPerformanceCaveat:!!H[b+
7],gb:H[b+8],yb:H[b+9],Oa:H[b+10],Ya:H[b+11],Bb:H[b+12],Cb:H[b+13]};a=Kb(a);if(!a||b.Ya)b=0;else if(a=a.getContext("webgl",b)){var c=P(8);H[c+4>>2]=N|0;var e={ub:c,attributes:b,version:b.gb,Fa:a};a.canvas&&(a.canvas.Ga=e);("undefined"===typeof b.Oa||b.Oa)&&Rb(e);b=c}else b=0;return b},z:function(){O.cb()},a:D||d.wasmMemory,C:function(a,b,c,e){if("undefined"===typeof SharedArrayBuffer)return A("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!a)return A("pthread_create called with a null thread pointer!"),
28;var f=[];if(w&&0===f.length)return $b(687865856,a,b,c,e);var g=0,l=0,h=0,n=0;if(b){var u=H[b>>2];u+=81920;g=H[b+8>>2];l=0!==H[b+12>>2];if(0===H[b+16>>2]){var t=H[b+20>>2],q=H[b+24>>2];h=b+20;n=b+24;var v=O.Ka?O.Ka:N|0;if(h||n)if(v)if(H[v+12>>2]!==v)A("pthread_getschedparam attempted on thread "+v+", which does not point to a valid thread, or does not exist anymore!");else{var x=Atomics.load(J,v+128>>2);v=Atomics.load(J,v+132>>2);h&&(H[h>>2]=x);n&&(H[n>>2]=v)}else A("pthread_getschedparam called with a null thread pointer!");
h=H[b+20>>2];n=H[b+24>>2];H[b+20>>2]=t;H[b+24>>2]=q}else h=H[b+20>>2],n=H[b+24>>2]}else u=2097152;(b=0==g)?g=ac(16,u):(g-=u,la(0<g));t=P(232);for(q=0;58>q;++q)J[(t>>2)+q]=0;H[a>>2]=t;H[t+12>>2]=t;a=t+156;H[a>>2]=a;c={za:g,Ca:u,Ja:b,Sa:h,Ta:n,Na:l,kb:c,Ba:t,hb:N|0,Da:e,nb:f};w?(c.rb="spawnThread",postMessage(c,f)):Va(c);return 0},i:Vb};
(function(){function a(f,g){d.asm=f.exports;ya=d.asm.M;ja=g;w||(L--,d.monitorRunDependencies&&d.monitorRunDependencies(L),0==L&&(null!==Ea&&(clearInterval(Ea),Ea=null),Fa&&(f=Fa,Fa=null,f())))}function b(f){a(f.instance,f.module)}function c(f){return Ia().then(function(g){return WebAssembly.instantiate(g,e)}).then(f,function(g){A("failed to asynchronously prepare wasm: "+g);C(g)})}var e={a:bc};w||(la(!w,"addRunDependency cannot be used in a pthread worker"),L++,d.monitorRunDependencies&&d.monitorRunDependencies(L));
if(d.instantiateWasm)try{return d.instantiateWasm(e,a)}catch(f){return A("Module.instantiateWasm callback failed with error: "+f),!1}(function(){return B||"function"!==typeof WebAssembly.instantiateStreaming||Ga()||"function"!==typeof fetch?c(b):fetch(M,{credentials:"same-origin"}).then(function(f){return WebAssembly.instantiateStreaming(f,e).then(b,function(g){A("wasm streaming compile failed: "+g);A("falling back to ArrayBuffer instantiation");return c(b)})})})().catch(ba);return{}})();
var Zb=d.___wasm_call_ctors=function(){return(Zb=d.___wasm_call_ctors=d.asm.N).apply(null,arguments)},P=d._malloc=function(){return(P=d._malloc=d.asm.O).apply(null,arguments)},Q=d._free=function(){return(Q=d._free=d.asm.P).apply(null,arguments)},xb=d.___getTypeName=function(){return(xb=d.___getTypeName=d.asm.Q).apply(null,arguments)};d.___embind_register_native_and_builtin_types=function(){return(d.___embind_register_native_and_builtin_types=d.asm.R).apply(null,arguments)};
d.___em_js__initPthreadsJS=function(){return(d.___em_js__initPthreadsJS=d.asm.S).apply(null,arguments)};
var Ub=d._emscripten_get_global_libc=function(){return(Ub=d._emscripten_get_global_libc=d.asm.T).apply(null,arguments)},Eb=d.stackSave=function(){return(Eb=d.stackSave=d.asm.U).apply(null,arguments)},Xa=d.stackRestore=function(){return(Xa=d.stackRestore=d.asm.V).apply(null,arguments)},Fb=d.stackAlloc=function(){return(Fb=d.stackAlloc=d.asm.W).apply(null,arguments)},Wa=d._emscripten_stack_set_limits=function(){return(Wa=d._emscripten_stack_set_limits=d.asm.X).apply(null,arguments)},ac=d._memalign=
function(){return(ac=d._memalign=d.asm.Y).apply(null,arguments)},Ta=d.___pthread_tsd_run_dtors=function(){return(Ta=d.___pthread_tsd_run_dtors=d.asm.Z).apply(null,arguments)},Ua=d._emscripten_main_thread_process_queued_calls=function(){return(Ua=d._emscripten_main_thread_process_queued_calls=d.asm._).apply(null,arguments)};d._emscripten_current_thread_process_queued_calls=function(){return(d._emscripten_current_thread_process_queued_calls=d.asm.$).apply(null,arguments)};
var Ra=d._emscripten_register_main_browser_thread_id=function(){return(Ra=d._emscripten_register_main_browser_thread_id=d.asm.aa).apply(null,arguments)};d._emscripten_main_browser_thread_id=function(){return(d._emscripten_main_browser_thread_id=d.asm.ba).apply(null,arguments)};var Ja=d._do_emscripten_dispatch_to_thread=function(){return(Ja=d._do_emscripten_dispatch_to_thread=d.asm.ca).apply(null,arguments)};
d._emscripten_async_run_in_main_thread=function(){return(d._emscripten_async_run_in_main_thread=d.asm.da).apply(null,arguments)};d._emscripten_sync_run_in_main_thread=function(){return(d._emscripten_sync_run_in_main_thread=d.asm.ea).apply(null,arguments)};d._emscripten_sync_run_in_main_thread_0=function(){return(d._emscripten_sync_run_in_main_thread_0=d.asm.fa).apply(null,arguments)};
d._emscripten_sync_run_in_main_thread_1=function(){return(d._emscripten_sync_run_in_main_thread_1=d.asm.ga).apply(null,arguments)};d._emscripten_sync_run_in_main_thread_2=function(){return(d._emscripten_sync_run_in_main_thread_2=d.asm.ha).apply(null,arguments)};d._emscripten_sync_run_in_main_thread_xprintf_varargs=function(){return(d._emscripten_sync_run_in_main_thread_xprintf_varargs=d.asm.ia).apply(null,arguments)};
d._emscripten_sync_run_in_main_thread_3=function(){return(d._emscripten_sync_run_in_main_thread_3=d.asm.ja).apply(null,arguments)};var $b=d._emscripten_sync_run_in_main_thread_4=function(){return($b=d._emscripten_sync_run_in_main_thread_4=d.asm.ka).apply(null,arguments)};d._emscripten_sync_run_in_main_thread_5=function(){return(d._emscripten_sync_run_in_main_thread_5=d.asm.la).apply(null,arguments)};
d._emscripten_sync_run_in_main_thread_6=function(){return(d._emscripten_sync_run_in_main_thread_6=d.asm.ma).apply(null,arguments)};d._emscripten_sync_run_in_main_thread_7=function(){return(d._emscripten_sync_run_in_main_thread_7=d.asm.na).apply(null,arguments)};
var Gb=d._emscripten_run_in_main_runtime_thread_js=function(){return(Gb=d._emscripten_run_in_main_runtime_thread_js=d.asm.oa).apply(null,arguments)},Mb=d.__emscripten_call_on_thread=function(){return(Mb=d.__emscripten_call_on_thread=d.asm.pa).apply(null,arguments)};d._emscripten_tls_init=function(){return(d._emscripten_tls_init=d.asm.qa).apply(null,arguments)};d.dynCall_ijiii=function(){return(d.dynCall_ijiii=d.asm.ra).apply(null,arguments)};var Sa=d._main_thread_futex=9884;d.PThread=O;
d.PThread=O;d._pthread_self=Vb;d.wasmMemory=D;d.ExitStatus=cc;var dc;function cc(a){this.name="ExitStatus";this.message="Program terminated with exit("+a+")";this.status=a}Fa=function ec(){dc||fc();dc||(Fa=ec)};
function fc(){function a(){if(!dc&&(dc=!0,d.calledRun=!0,!ka)){La(Aa);w||La(Ba);aa(d);if(d.onRuntimeInitialized)d.onRuntimeInitialized();if(!w){if(d.postRun)for("function"==typeof d.postRun&&(d.postRun=[d.postRun]);d.postRun.length;){var b=d.postRun.shift();Ca.unshift(b)}La(Ca)}}}if(!(0<L)){if(!w){if(d.preRun)for("function"==typeof d.preRun&&(d.preRun=[d.preRun]);d.preRun.length;)Da();La(za)}0<L||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},
1);a()},1)):a())}}d.run=fc;if(d.preInit)for("function"==typeof d.preInit&&(d.preInit=[d.preInit]);0<d.preInit.length;)d.preInit.pop()();w||(noExitRuntime=!0);w?O.eb():fc();


  return loadMP4H264Encoder.ready
}
);
})();
export default loadMP4H264Encoder;