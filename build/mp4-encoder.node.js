
var loadMP4H264Encoder = (function() {
  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;
  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;
  return (
function(loadMP4H264Encoder) {
  loadMP4H264Encoder = loadMP4H264Encoder || {};


function e(){k.buffer!=n&&p(k.buffer);return aa}function w(){k.buffer!=n&&p(k.buffer);return ba}function x(){k.buffer!=n&&p(k.buffer);return ca}function da(){k.buffer!=n&&p(k.buffer);return ea}function y(){k.buffer!=n&&p(k.buffer);return fa}function A(){k.buffer!=n&&p(k.buffer);return ha}function ia(){k.buffer!=n&&p(k.buffer);return ja}function ka(){k.buffer!=n&&p(k.buffer);return la}var B;B||(B=typeof loadMP4H264Encoder !== 'undefined' ? loadMP4H264Encoder : {});var ma,na;
B.ready=new Promise(function(a,b){ma=a;na=b});function oa(){let a=0,b=0,c=new Uint8Array(256);return{contents:function(){return c.slice(0,b)},seek:function(d){a=d},write:function(d,f,g){var h=a+g,l=c.length;l>=h||(h=Math.max(h,l*(1048576>l?2:1.125)>>>0),0!=l&&(h=Math.max(h,256)),l=c,c=new Uint8Array(h),0<b&&c.set(l.subarray(0,b),0));c.set(d.subarray(f,f+g),a);a+=g;b=Math.max(b,a);return g}}}
B.create=function(a={}){function b(){null!=l||u||(l=B.create_buffer(d*f*3/2));return l}function c(){null!=m||u||(m=B.create_buffer(d*f*g));return m}const d=a.width,f=a.height,g=a.stride||4;if(!d||!f)throw Error("width and height must be > 0");const h=oa();let l=null,m=null,u=!1;a=Object.assign({},a);delete a.stride;const t=B.create_encoder(a,function(q,v,z){h.seek(z);return h.write(B.HEAPU8,q,v)!=v});return{memory:function(){return B.HEAPU8},getYUVPointer:b,getRGBPointer:c,end:function(){if(u)throw Error("Attempting to end() an encoder that is already finished");
u=!0;B.finalize_encoder(t);null!=l&&B.free_buffer(l);null!=m&&B.free_buffer(m);return h.contents()},encodeRGBPointer:function(){const q=c(),v=b();B.encode_rgb(t,q,g,v)},encodeYUVPointer:function(){const q=b();B.encode_yuv(t,q)},encodeRGB:function(q){if(q.length!==d*f*g)throw Error("Expected buffer to be sized (width * height * "+g+")");const v=c(),z=b();B.HEAPU8.set(q,v);B.encode_rgb(t,v,g,z)},encodeYUV:function(q){if(q.length!==d*f*3/2)throw Error("Expected buffer to be sized (width * height * 3) / 2");
const v=b();B.HEAPU8.set(q,v);B.encode_yuv(t,v)}}};B.locateFile=function(a,b){B.simd&&(a=a.replace(/\.wasm$/i,".simd.wasm"));return B.getWasmPath?B.getWasmPath(a,b,B.simd):b+a};var C={},D;for(D in B)B.hasOwnProperty(D)&&(C[D]=B[D]);var E=B.ENVIRONMENT_IS_PTHREAD||!1;E&&(n=B.buffer);var pa="";function qa(a){return B.locateFile?B.locateFile(a,pa):pa+a}var ra,sa,ta,ua;pa=__dirname+"/";ra=function(a){ta||(ta=require("fs"));ua||(ua=require("path"));a=ua.normalize(a);return ta.readFileSync(a,null)};
sa=function(a){a=ra(a);a.buffer||(a=new Uint8Array(a));assert(a.buffer);return a};1<process.argv.length&&process.argv[1].replace(/\\/g,"/");process.argv.slice(2);process.on("uncaughtException",function(a){if(!(a instanceof va))throw a;});process.on("unhandledRejection",F);B.inspect=function(){return"[Emscripten Module object]"};var wa;
try{wa=require("worker_threads")}catch(a){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),a;}global.Worker=wa.Worker;"undefined"===typeof performance&&(global.performance=require("perf_hooks").performance);var xa=B.print||console.log.bind(console),G=B.printErr||console.warn.bind(console);for(D in C)C.hasOwnProperty(D)&&(B[D]=C[D]);C=null;var ya;B.wasmBinary&&(ya=B.wasmBinary);var noExitRuntime;
B.noExitRuntime&&(noExitRuntime=B.noExitRuntime);"object"!==typeof WebAssembly&&F("no native wasm support detected");var k,za,threadInfoStruct=0,selfThreadId=0,Aa=!1;function assert(a,b){a||F("Assertion failed: "+b)}
function H(a,b){if(a){var c=w();b=a+b;for(var d="";!(a>=b);){var f=c[a++];if(!f)break;if(f&128){var g=c[a++]&63;if(192==(f&224))d+=String.fromCharCode((f&31)<<6|g);else{var h=c[a++]&63;f=224==(f&240)?(f&15)<<12|g<<6|h:(f&7)<<18|g<<12|h<<6|c[a++]&63;65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode(55296|f>>10,56320|f&1023))}}else d+=String.fromCharCode(f)}c=d}else c="";return c}
function Ba(a,b,c){var d=w();if(0<c){c=b+c-1;for(var f=0;f<a.length;++f){var g=a.charCodeAt(f);if(55296<=g&&57343>=g){var h=a.charCodeAt(++f);g=65536+((g&1023)<<10)|h&1023}if(127>=g){if(b>=c)break;d[b++]=g}else{if(2047>=g){if(b+1>=c)break;d[b++]=192|g>>6}else{if(65535>=g){if(b+2>=c)break;d[b++]=224|g>>12}else{if(b+3>=c)break;d[b++]=240|g>>18;d[b++]=128|g>>12&63}d[b++]=128|g>>6&63}d[b++]=128|g&63}}d[b]=0}}
function Ca(a){for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&(d=65536+((d&1023)<<10)|a.charCodeAt(++c)&1023);127>=d?++b:b=2047>=d?b+2:65535>=d?b+3:b+4}return b}function Da(a,b){for(var c="",d=0;!(d>=b/2);++d){var f=x()[a+2*d>>1];if(0==f)break;c+=String.fromCharCode(f)}return c}function Ea(a,b,c){void 0===c&&(c=2147483647);if(2>c)return 0;c-=2;var d=b;c=c<2*a.length?c/2:a.length;for(var f=0;f<c;++f){var g=a.charCodeAt(f);x()[b>>1]=g;b+=2}x()[b>>1]=0;return b-d}
function Fa(a){return 2*a.length}function Ga(a,b){for(var c=0,d="";!(c>=b/4);){var f=y()[a+4*c>>2];if(0==f)break;++c;65536<=f?(f-=65536,d+=String.fromCharCode(55296|f>>10,56320|f&1023)):d+=String.fromCharCode(f)}return d}function Ha(a,b,c){void 0===c&&(c=2147483647);if(4>c)return 0;var d=b;c=d+c-4;for(var f=0;f<a.length;++f){var g=a.charCodeAt(f);if(55296<=g&&57343>=g){var h=a.charCodeAt(++f);g=65536+((g&1023)<<10)|h&1023}y()[b>>2]=g;b+=4;if(b+4>c)break}y()[b>>2]=0;return b-d}
function Ia(a){for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&++c;b+=4}return b}var n,aa,ba,ca,ea,fa,ha,ja,la;function p(a){n=a;B.HEAP8=aa=new Int8Array(a);B.HEAP16=ca=new Int16Array(a);B.HEAP32=fa=new Int32Array(a);B.HEAPU8=ba=new Uint8Array(a);B.HEAPU16=ea=new Uint16Array(a);B.HEAPU32=ha=new Uint32Array(a);B.HEAPF32=ja=new Float32Array(a);B.HEAPF64=la=new Float64Array(a)}var Ja=B.INITIAL_MEMORY||16777216;
if(E)k=B.wasmMemory,n=B.buffer;else if(B.wasmMemory)k=B.wasmMemory;else if(k=new WebAssembly.Memory({initial:Ja/65536,maximum:32768,shared:!0}),!(k.buffer instanceof SharedArrayBuffer))throw G("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),
Error("bad memory");k&&(n=k.buffer);Ja=n.byteLength;p(n);var I,Ka=[],La=[],Ma=[],Na=[];function Oa(){var a=B.preRun.shift();Ka.unshift(a)}var J=0,Pa=null,K=null;B.preloadedImages={};B.preloadedAudios={};function F(a){if(B.onAbort)B.onAbort(a);E&&console.error("Pthread aborting at "+Error().stack);G(a);Aa=!0;a=new WebAssembly.RuntimeError("abort("+a+"). Build with -s ASSERTIONS=1 for more info.");na(a);throw a;}
function Qa(){var a=L;return String.prototype.startsWith?a.startsWith("data:application/octet-stream;base64,"):0===a.indexOf("data:application/octet-stream;base64,")}var L="mp4-encoder.node.wasm";Qa()||(L=qa(L));function Ra(){try{if(ya)return new Uint8Array(ya);if(sa)return sa(L);throw"both async and sync fetching of the wasm failed";}catch(a){F(a)}}var Ta={8988:function(a,b){setTimeout(function(){Sa(a,b)},0)}};
function Ua(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b)b(B);else{var c=b.Ya;"number"===typeof c?void 0===b.Ca?I.get(c)():I.get(c)(b.Ca):c(void 0===b.Ca?null:b.Ca)}}}function Va(a,b,c){var d;-1!=a.indexOf("j")?d=c&&c.length?B["dynCall_"+a].apply(null,[b].concat(c)):B["dynCall_"+a].call(null,b):d=I.get(b).apply(null,c);return d}B.dynCall=Va;var M=0,Wa=0,Xa=0;function Ya(a,b,c){M=a|0;Xa=b|0;Wa=c|0}B.registerPthreadPtr=Ya;
function Za(a,b){if(0>=a||a>e().length||a&1||0>b)return-28;if(0==b)return 0;2147483647<=b&&(b=Infinity);var c=Atomics.load(y(),N.Oa>>2),d=0;if(c==a&&Atomics.compareExchange(y(),N.Oa>>2,c,0)==c&&(--b,d=1,0>=b))return 1;a=Atomics.notify(y(),a>>2,b);if(0<=a)return a+d;throw"Atomics.notify returned an unexpected value "+a;}B._emscripten_futex_wake=Za;
var N={nb:1,vb:{Ra:0,Sa:0},wa:[],ya:[],tb:function(){},bb:function(){N.ta=O(232);for(var a=0;58>a;++a)A()[N.ta/4+a]=0;y()[N.ta+12>>2]=N.ta;a=N.ta+156;y()[a>>2]=a;var b=O(512);for(a=0;128>a;++a)A()[b/4+a]=0;Atomics.store(A(),N.ta+104>>2,b);Atomics.store(A(),N.ta+40>>2,N.ta);Atomics.store(A(),N.ta+44>>2,42);N.Na();Ya(N.ta,!0,1);$a(N.ta)},cb:function(){N.Na();ma(B);N.receiveObjectTransfer=N.hb;N.setThreadStatus=N.ib;N.threadCancel=N.kb;N.threadExit=N.lb},Na:function(){N.Oa=ab},va:{},Ua:[],ib:function(){},
Qa:function(){for(;0<N.Ua.length;)N.Ua.pop()();E&&threadInfoStruct&&bb()},lb:function(a){var b=M|0;b&&(Atomics.store(A(),b+4>>2,a),Atomics.store(A(),b+0>>2,1),Atomics.store(A(),b+60>>2,1),Atomics.store(A(),b+64>>2,0),N.Qa(),Za(b+0,2147483647),Ya(0,0,0),threadInfoStruct=0,E&&postMessage({cmd:"exit"}))},kb:function(){N.Qa();Atomics.store(A(),threadInfoStruct+4>>2,-1);Atomics.store(A(),threadInfoStruct+0>>2,1);Za(threadInfoStruct+0,2147483647);threadInfoStruct=selfThreadId=0;Ya(0,0,0);postMessage({cmd:"cancelDone"})},
Cb:function(){for(var a in N.va){var b=N.va[a];b&&b.worker&&N.Ha(b.worker)}N.va={};for(a=0;a<N.wa.length;++a){var c=N.wa[a];c.terminate()}N.wa=[];for(a=0;a<N.ya.length;++a)c=N.ya[a],b=c.sa,N.Ka(b),c.terminate();N.ya=[]},Ka:function(a){if(a){if(a.threadInfoStruct){var b=y()[a.threadInfoStruct+104>>2];y()[a.threadInfoStruct+104>>2]=0;Q(b);Q(a.threadInfoStruct)}a.threadInfoStruct=0;a.Ia&&a.za&&Q(a.za);a.za=0;a.worker&&(a.worker.sa=null)}},Ha:function(a){delete N.va[a.sa.Ta];N.wa.push(a);N.ya.splice(N.ya.indexOf(a),
1);N.Ka(a.sa);a.sa=void 0},hb:function(){},eb:function(a,b){a.onmessage=function(c){var d=c.data,f=d.cmd;a.sa&&(N.Ja=a.sa.threadInfoStruct);if(d.targetThread&&d.targetThread!=(M|0)){var g=N.va[d.Bb];g?g.worker.postMessage(c.data,d.transferList):console.error('Internal error! Worker sent a message "'+f+'" to target pthread '+d.targetThread+", but that thread no longer exists!")}else if("processQueuedMainThreadWork"===f)cb();else if("spawnThread"===f)db(c.data);else if("cleanupThread"===f){c=d.thread;
if(E)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!c)throw"Internal Error! Null pthread_ptr in cleanupThread!";y()[c+12>>2]=0;(c=N.va[c])&&N.Ha(c.worker)}else if("killThread"===f){c=d.thread;if(E)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!c)throw"Internal Error! Null pthread_ptr in killThread!";y()[c+12>>2]=0;c=N.va[c];c.worker.terminate();N.Ka(c);N.ya.splice(N.ya.indexOf(c.worker),1);c.worker.sa=
void 0}else if("cancelThread"===f){c=d.thread;if(E)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!c)throw"Internal Error! Null pthread_ptr in cancelThread!";N.va[c].worker.postMessage({cmd:"cancel"})}else"loaded"===f?(a.loaded=!0,b&&b(a),a.Da&&(a.Da(),delete a.Da)):"print"===f?xa("Thread "+d.threadId+": "+d.text):"printErr"===f?G("Thread "+d.threadId+": "+d.text):"alert"===f?alert("Thread "+d.threadId+": "+d.text):"exit"===f?a.sa&&Atomics.load(A(),
a.sa.Ta+68>>2)&&N.Ha(a):"cancelDone"===f?N.Ha(a):"objectTransfer"!==f&&("setimmediate"===c.data.target?a.postMessage(c.data):G("worker sent an unknown command "+f));N.Ja=void 0};a.onerror=function(c){G("pthread sent an error! "+c.filename+":"+c.lineno+": "+c.message)};a.on("message",function(c){a.onmessage({data:c})});a.on("error",function(c){a.onerror(c)});a.on("exit",function(){});a.postMessage({cmd:"load",urlOrBlob:B.mainScriptUrlOrBlob||_scriptDir,wasmMemory:k,wasmModule:za})},Va:function(){var a=
qa("mp4-encoder.node.worker.js");N.wa.push(new Worker(a))},Za:function(){0==N.wa.length&&(N.Va(),N.eb(N.wa[0]));return 0<N.wa.length?N.wa.pop():null},ob:function(a){for(a=performance.now()+a;performance.now()<a;);}};B.establishStackSpace=function(a,b){eb(a,b);fb(a)};B.getNoExitRuntime=function(){return noExitRuntime};function gb(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+a);}}var hb=void 0;
function R(a){for(var b="";w()[a];)b+=hb[w()[a++]];return b}var T={},U={},ib={};function jb(a){if(void 0===a)return"_unknown";a=a.replace(/[^a-zA-Z0-9_]/g,"$");var b=a.charCodeAt(0);return 48<=b&&57>=b?"_"+a:a}function kb(a,b){a=jb(a);return(new Function("body","return function "+a+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n'))(b)}
function lb(a){var b=Error,c=kb(a,function(d){this.name=a;this.message=d;d=Error(d).stack;void 0!==d&&(this.stack=this.toString()+"\n"+d.replace(/^Error(:[^\n]*)?\n/,""))});c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message};return c}var mb=void 0;function V(a){throw new mb(a);}var nb=void 0;
function ob(a,b){function c(l){l=b(l);if(l.length!==d.length)throw new nb("Mismatched type converter count");for(var m=0;m<d.length;++m)W(d[m],l[m])}var d=[];d.forEach(function(l){ib[l]=a});var f=Array(a.length),g=[],h=0;a.forEach(function(l,m){U.hasOwnProperty(l)?f[m]=U[l]:(g.push(l),T.hasOwnProperty(l)||(T[l]=[]),T[l].push(function(){f[m]=U[l];++h;h===g.length&&c(f)}))});0===g.length&&c(f)}
function W(a,b,c){c=c||{};if(!("argPackAdvance"in b))throw new TypeError("registerType registeredInstance requires argPackAdvance");var d=b.name;a||V('type "'+d+'" must have a positive integer typeid pointer');if(U.hasOwnProperty(a)){if(c.$a)return;V("Cannot register type '"+d+"' twice")}U[a]=b;delete ib[a];T.hasOwnProperty(a)&&(b=T[a],delete T[a],b.forEach(function(f){f()}))}var pb=[],X=[{},{value:void 0},{value:null},{value:!0},{value:!1}];
function qb(a){4<a&&0===--X[a].La&&(X[a]=void 0,pb.push(a))}function Y(a){switch(a){case void 0:return 1;case null:return 2;case !0:return 3;case !1:return 4;default:var b=pb.length?pb.pop():X.length;X[b]={La:1,value:a};return b}}function rb(a){return this.fromWireType(A()[a>>2])}function sb(a){if(null===a)return"null";var b=typeof a;return"object"===b||"array"===b||"function"===b?a.toString():""+a}
function tb(a,b){switch(b){case 2:return function(c){return this.fromWireType(ia()[c>>2])};case 3:return function(c){return this.fromWireType(ka()[c>>3])};default:throw new TypeError("Unknown float type: "+a);}}function ub(a){var b=Function;if(!(b instanceof Function))throw new TypeError("new_ called with constructor type "+typeof b+" which is not a function");var c=kb(b.name||"unknownFunctionName",function(){});c.prototype=b.prototype;c=new c;a=b.apply(c,a);return a instanceof Object?a:c}
function vb(a){for(;a.length;){var b=a.pop();a.pop()(b)}}function wb(a,b){var c=B;if(void 0===c[a].ua){var d=c[a];c[a]=function(){c[a].ua.hasOwnProperty(arguments.length)||V("Function '"+b+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+c[a].ua+")!");return c[a].ua[arguments.length].apply(this,arguments)};c[a].ua=[];c[a].ua[d.Wa]=d}}
function xb(a,b,c){B.hasOwnProperty(a)?((void 0===c||void 0!==B[a].ua&&void 0!==B[a].ua[c])&&V("Cannot register public name '"+a+"' twice"),wb(a,a),B.hasOwnProperty(c)&&V("Cannot register multiple overloads of a function with the same number of arguments ("+c+")!"),B[a].ua[c]=b):(B[a]=b,void 0!==c&&(B[a].yb=c))}function yb(a,b){for(var c=[],d=0;d<a;d++)c.push(y()[(b>>2)+d]);return c}
function zb(a,b){assert(0<=a.indexOf("j"),"getDynCaller should only be called with i64 sigs");var c=[];return function(){c.length=arguments.length;for(var d=0;d<arguments.length;d++)c[d]=arguments[d];return Va(a,b,c)}}function Cb(a,b){a=R(a);var c=-1!=a.indexOf("j")?zb(a,b):I.get(b);"function"!==typeof c&&V("unknown function pointer with signature "+a+": "+b);return c}var Db=void 0;function Eb(a){a=Fb(a);var b=R(a);Q(a);return b}
function Gb(a,b){function c(g){f[g]||U[g]||(ib[g]?ib[g].forEach(c):(d.push(g),f[g]=!0))}var d=[],f={};b.forEach(c);throw new Db(a+": "+d.map(Eb).join([", "]));}function Hb(a,b,c){switch(b){case 0:return c?function(d){return e()[d]}:function(d){return w()[d]};case 1:return c?function(d){return x()[d>>1]}:function(d){return da()[d>>1]};case 2:return c?function(d){return y()[d>>2]}:function(d){return A()[d>>2]};default:throw new TypeError("Unknown integer type: "+a);}}
function Z(a){a||V("Cannot use deleted val. handle = "+a);return X[a].value}function Ib(a,b){var c=U[a];void 0===c&&V(b+" has unknown type "+Eb(a));return c}var Jb={};function Kb(a,b){for(var c=arguments.length-2,d=Lb(),f=Mb(8*c),g=f>>3,h=0;h<c;h++)ka()[g+h]=arguments[2+h];c=Nb(a,c,f,b);fb(d);return c}var Ob=[],Pb=[],Qb=[0,"undefined"!==typeof document?document:0,"undefined"!==typeof window?window:0];
function Rb(a){a=2<a?H(a):a;return Qb[a]||("undefined"!==typeof document?document.querySelector(a):void 0)}
function Sb(a,b,c){var d=Rb(a);if(!d)return-4;d.Ga&&(y()[d.Ga>>2]=b,y()[d.Ga+4>>2]=c);if(d.Pa||!d.qb)d.Pa&&(d=d.Pa),a=!1,d.Fa&&d.Fa.Ea&&(a=d.Fa.Ea.getParameter(2978),a=0===a[0]&&0===a[1]&&a[2]===d.width&&a[3]===d.height),d.width=b,d.height=c,a&&d.Fa.Ea.viewport(0,0,b,c);else{if(d.Ga){d=y()[d.Ga+8>>2];a=a?H(a):"";var f=Lb(),g=Mb(12),h=0;if(a){h=Ca(a)+1;var l=O(h);Ba(a,l,h);h=l}y()[g>>2]=h;y()[g+4>>2]=b;y()[g+8>>2]=c;Tb(0,d,657457152,0,h,g);fb(f);return 1}return-4}return 0}
function Ub(a,b,c){return E?Kb(1,1,a,b,c):Sb(a,b,c)}function Vb(a){var b=a.getExtension("ANGLE_instanced_arrays");b&&(a.vertexAttribDivisor=function(c,d){b.vertexAttribDivisorANGLE(c,d)},a.drawArraysInstanced=function(c,d,f,g){b.drawArraysInstancedANGLE(c,d,f,g)},a.drawElementsInstanced=function(c,d,f,g,h){b.drawElementsInstancedANGLE(c,d,f,g,h)})}
function Wb(a){var b=a.getExtension("OES_vertex_array_object");b&&(a.createVertexArray=function(){return b.createVertexArrayOES()},a.deleteVertexArray=function(c){b.deleteVertexArrayOES(c)},a.bindVertexArray=function(c){b.bindVertexArrayOES(c)},a.isVertexArray=function(c){return b.isVertexArrayOES(c)})}function Xb(a){var b=a.getExtension("WEBGL_draw_buffers");b&&(a.drawBuffers=function(c,d){b.drawBuffersWEBGL(c,d)})}
function Yb(a){a||(a=Zb);if(!a.ab){a.ab=!0;var b=a.Ea;Vb(b);Wb(b);Xb(b);b.rb=b.getExtension("EXT_disjoint_timer_query");b.xb=b.getExtension("WEBGL_multi_draw");var c="OES_texture_float OES_texture_half_float OES_standard_derivatives OES_vertex_array_object WEBGL_compressed_texture_s3tc WEBGL_depth_texture OES_element_index_uint EXT_texture_filter_anisotropic EXT_frag_depth WEBGL_draw_buffers ANGLE_instanced_arrays OES_texture_float_linear OES_texture_half_float_linear EXT_blend_minmax EXT_shader_texture_lod EXT_texture_norm16 WEBGL_compressed_texture_pvrtc EXT_color_buffer_half_float WEBGL_color_buffer_float EXT_sRGB WEBGL_compressed_texture_etc1 EXT_disjoint_timer_query WEBGL_compressed_texture_etc WEBGL_compressed_texture_astc EXT_color_buffer_float WEBGL_compressed_texture_s3tc_srgb EXT_disjoint_timer_query_webgl2 WEBKIT_WEBGL_compressed_texture_pvrtc".split(" ");
(b.getSupportedExtensions()||[]).forEach(function(d){-1!=c.indexOf(d)&&b.getExtension(d)})}}var Zb,$b=["default","low-power","high-performance"];
function db(a){if(E)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var b=N.Za();if(void 0!==b.sa)throw"Internal error!";if(!a.Aa)throw"Internal error, no pthread ptr!";N.ya.push(b);for(var c=O(512),d=0;128>d;++d)y()[c+4*d>>2]=0;var f=a.za+a.Ba;d=N.va[a.Aa]={worker:b,za:a.za,Ba:a.Ba,Ia:a.Ia,Ta:a.Aa,threadInfoStruct:a.Aa};var g=d.threadInfoStruct>>2;Atomics.store(A(),g,0);Atomics.store(A(),g+1,0);Atomics.store(A(),g+2,0);Atomics.store(A(),g+17,a.detached);
Atomics.store(A(),g+26,c);Atomics.store(A(),g+12,0);Atomics.store(A(),g+10,d.threadInfoStruct);Atomics.store(A(),g+11,42);Atomics.store(A(),g+27,a.Ba);Atomics.store(A(),g+21,a.Ba);Atomics.store(A(),g+20,f);Atomics.store(A(),g+29,f);Atomics.store(A(),g+30,a.detached);Atomics.store(A(),g+32,a.Ra);Atomics.store(A(),g+33,a.Sa);c=ac()+40;Atomics.store(A(),g+44,c);b.sa=d;var h={cmd:"run",start_routine:a.jb,arg:a.Ca,threadInfoStruct:a.Aa,selfThreadId:a.Aa,parentThreadId:a.gb,stackBase:a.za,stackSize:a.Ba};
b.Da=function(){h.time=performance.now();b.postMessage(h,a.mb)};b.loaded&&(b.Da(),delete b.Da)}function bc(){return M|0}B._pthread_self=bc;for(var cc=Array(256),dc=0;256>dc;++dc)cc[dc]=String.fromCharCode(dc);hb=cc;mb=B.BindingError=lb("BindingError");nb=B.InternalError=lb("InternalError");B.count_emval_handles=function(){for(var a=0,b=5;b<X.length;++b)void 0!==X[b]&&++a;return a};B.get_first_emval=function(){for(var a=5;a<X.length;++a)if(void 0!==X[a])return X[a];return null};
Db=B.UnboundTypeError=lb("UnboundTypeError");var ec=[null,Ub];E||La.push({Ya:function(){fc()}});
var ic={b:function(a,b,c,d){F("Assertion failed: "+H(a)+", at: "+[b?H(b):"unknown filename",c,d?H(d):"unknown function"])},K:function(a,b,c,d,f){var g=gb(c);b=R(b);W(a,{name:b,fromWireType:function(h){return!!h},toWireType:function(h,l){return l?d:f},argPackAdvance:8,readValueFromPointer:function(h){if(1===c)var l=e();else if(2===c)l=x();else if(4===c)l=y();else throw new TypeError("Unknown boolean type size: "+b);return this.fromWireType(l[h>>g])},xa:null})},J:function(a,b){b=R(b);W(a,{name:b,fromWireType:function(c){var d=
X[c].value;qb(c);return d},toWireType:function(c,d){return Y(d)},argPackAdvance:8,readValueFromPointer:rb,xa:null})},w:function(a,b,c){c=gb(c);b=R(b);W(a,{name:b,fromWireType:function(d){return d},toWireType:function(d,f){if("number"!==typeof f&&"boolean"!==typeof f)throw new TypeError('Cannot convert "'+sb(f)+'" to '+this.name);return f},argPackAdvance:8,readValueFromPointer:tb(b,c),xa:null})},m:function(a,b,c,d,f,g){var h=yb(b,c);a=R(a);f=Cb(d,f);xb(a,function(){Gb("Cannot call "+a+" due to unbound types",
h)},b-1);ob(h,function(l){var m=[l[0],null].concat(l.slice(1)),u=l=a,t=f,q=m.length;2>q&&V("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var v=null!==m[1]&&!1,z=!1,r=1;r<m.length;++r)if(null!==m[r]&&void 0===m[r].xa){z=!0;break}var Ab="void"!==m[0].name,P="",S="";for(r=0;r<q-2;++r)P+=(0!==r?", ":"")+"arg"+r,S+=(0!==r?", ":"")+"arg"+r+"Wired";u="return function "+jb(u)+"("+P+") {\nif (arguments.length !== "+(q-2)+") {\nthrowBindingError('function "+u+" called with ' + arguments.length + ' arguments, expected "+
(q-2)+" args!');\n}\n";z&&(u+="var destructors = [];\n");var Bb=z?"destructors":"null";P="throwBindingError invoker fn runDestructors retType classParam".split(" ");t=[V,t,g,vb,m[0],m[1]];v&&(u+="var thisWired = classParam.toWireType("+Bb+", this);\n");for(r=0;r<q-2;++r)u+="var arg"+r+"Wired = argType"+r+".toWireType("+Bb+", arg"+r+"); // "+m[r+2].name+"\n",P.push("argType"+r),t.push(m[r+2]);v&&(S="thisWired"+(0<S.length?", ":"")+S);u+=(Ab?"var rv = ":"")+"invoker(fn"+(0<S.length?", ":"")+S+");\n";
if(z)u+="runDestructors(destructors);\n";else for(r=v?1:2;r<m.length;++r)q=1===r?"thisWired":"arg"+(r-2)+"Wired",null!==m[r].xa&&(u+=q+"_dtor("+q+"); // "+m[r].name+"\n",P.push(q+"_dtor"),t.push(m[r].xa));Ab&&(u+="var ret = retType.fromWireType(rv);\nreturn ret;\n");P.push(u+"}\n");m=ub(P).apply(null,t);r=b-1;if(!B.hasOwnProperty(l))throw new nb("Replacing nonexistant public symbol");void 0!==B[l].ua&&void 0!==r?B[l].ua[r]=m:(B[l]=m,B[l].Wa=r);return[]})},l:function(a,b,c,d,f){function g(u){return u}
b=R(b);-1===f&&(f=4294967295);var h=gb(c);if(0===d){var l=32-8*c;g=function(u){return u<<l>>>l}}var m=-1!=b.indexOf("unsigned");W(a,{name:b,fromWireType:g,toWireType:function(u,t){if("number"!==typeof t&&"boolean"!==typeof t)throw new TypeError('Cannot convert "'+sb(t)+'" to '+this.name);if(t<d||t>f)throw new TypeError('Passing a number "'+sb(t)+'" from JS side to C/C++ side to an argument of type "'+b+'", which is outside the valid range ['+d+", "+f+"]!");return m?t>>>0:t|0},argPackAdvance:8,readValueFromPointer:Hb(b,
h,0!==d),xa:null})},j:function(a,b,c){function d(g){g>>=2;var h=A();return new f(n,h[g+1],h[g])}var f=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];c=R(c);W(a,{name:c,fromWireType:d,argPackAdvance:8,readValueFromPointer:d},{$a:!0})},x:function(a,b){b=R(b);var c="std::string"===b;W(a,{name:b,fromWireType:function(d){var f=A()[d>>2];if(c)for(var g=d+4,h=0;h<=f;++h){var l=d+4+h;if(h==f||0==w()[l]){g=H(g,l-g);if(void 0===m)var m=g;else m+=String.fromCharCode(0),
m+=g;g=l+1}}else{m=Array(f);for(h=0;h<f;++h)m[h]=String.fromCharCode(w()[d+4+h]);m=m.join("")}Q(d);return m},toWireType:function(d,f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));var g="string"===typeof f;g||f instanceof Uint8Array||f instanceof Uint8ClampedArray||f instanceof Int8Array||V("Cannot pass non-string to std::string");var h=(c&&g?function(){return Ca(f)}:function(){return f.length})(),l=O(4+h+1);A()[l>>2]=h;if(c&&g)Ba(f,l+4,h+1);else if(g)for(g=0;g<h;++g){var m=f.charCodeAt(g);255<
m&&(Q(l),V("String has UTF-16 code units that do not fit in 8 bits"));w()[l+4+g]=m}else for(g=0;g<h;++g)w()[l+4+g]=f[g];null!==d&&d.push(Q,l);return l},argPackAdvance:8,readValueFromPointer:rb,xa:function(d){Q(d)}})},s:function(a,b,c){c=R(c);if(2===b){var d=Da;var f=Ea;var g=Fa;var h=function(){return da()};var l=1}else 4===b&&(d=Ga,f=Ha,g=Ia,h=function(){return A()},l=2);W(a,{name:c,fromWireType:function(m){for(var u=A()[m>>2],t=h(),q,v=m+4,z=0;z<=u;++z){var r=m+4+z*b;if(z==u||0==t[r>>l])v=d(v,r-
v),void 0===q?q=v:(q+=String.fromCharCode(0),q+=v),v=r+b}Q(m);return q},toWireType:function(m,u){"string"!==typeof u&&V("Cannot pass non-string to C++ string type "+c);var t=g(u),q=O(4+t+b);A()[q>>2]=t>>l;f(u,q+4,t+b);null!==m&&m.push(Q,q);return q},argPackAdvance:8,readValueFromPointer:rb,xa:function(m){Q(m)}})},L:function(a,b){b=R(b);W(a,{ub:!0,name:b,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},F:function(a,b){if(a==b)postMessage({cmd:"processQueuedMainThreadWork"});else if(E)postMessage({targetThread:a,
cmd:"processThreadQueue"});else{a=(a=N.va[a])&&a.worker;if(!a)return;a.postMessage({cmd:"processThreadQueue"})}return 1},f:function(a,b,c){a=Z(a);b=Ib(b,"emval::as");var d=[],f=Y(d);y()[c>>2]=f;return b.toWireType(d,a)},r:function(a,b,c,d){a=Z(a);for(var f=Array(b),g=0;g<b;++g)f[g]=Ib(y()[(c>>2)+g],"parameter "+g);c=Array(b);for(g=0;g<b;++g){var h=f[g];c[g]=h.readValueFromPointer(d);d+=h.argPackAdvance}a=a.apply(void 0,c);return Y(a)},c:qb,g:function(a,b){a=Z(a);b=Z(b);return Y(a[b])},d:function(a){4<
a&&(X[a].La+=1)},h:function(a){var b=Jb[a];a=void 0===b?R(a):b;return Y(a)},e:function(a){vb(X[a].value);qb(a)},k:function(a,b){a=Ib(a,"_emval_take_value");a=a.readValueFromPointer(b);return Y(a)},y:function(a){a=Z(a);return Y(typeof a)},v:function(){F()},G:function(a,b,c){Pb.length=0;var d;for(c>>=2;d=w()[b++];)(d=105>d)&&c&1&&c++,Pb.push(d?ka()[c++>>1]:y()[c]),++c;return Ta[a].apply(null,Pb)},u:function(){},n:function(a,b,c){if(0>=a||a>e().length||a&1)return-28;a=Atomics.wait(y(),a>>2,b,c);if("timed-out"===
a)return-73;if("not-equal"===a)return-6;if("ok"===a)return 0;throw"Atomics.wait returned an unexpected value "+a;},q:Za,o:function(){var a=process.hrtime();return 1E3*a[0]+a[1]/1E6},p:function(){return Xa|0},H:function(){return Wa|0},A:function(a,b,c){w().copyWithin(a,b,b+c)},B:function(a,b,c){Ob.length=b;c>>=3;for(var d=0;d<b;d++)Ob[d]=ka()[c+d];return(0>a?Ta[-a-1]:ec[a]).apply(null,Ob)},I:function(a){a>>>=0;var b=w().length;if(a<=b||2147483648<a)return!1;for(var c=1;4>=c;c*=2){var d=b*(1+.2/c);
d=Math.min(d,a+100663296);d=Math.max(16777216,a,d);0<d%65536&&(d+=65536-d%65536);a:{try{k.grow(Math.min(2147483648,d)-n.byteLength+65535>>>16);p(k.buffer);var f=1;break a}catch(g){}f=void 0}if(f)return!0}return!1},D:function(a,b,c){return Rb(a)?Sb(a,b,c):Ub(a,b,c)},t:function(){},E:function(a,b){b>>=2;var c=y()[b+6];b={alpha:!!y()[b],depth:!!y()[b+1],stencil:!!y()[b+2],antialias:!!y()[b+3],premultipliedAlpha:!!y()[b+4],preserveDrawingBuffer:!!y()[b+5],powerPreference:$b[c],failIfMajorPerformanceCaveat:!!y()[b+
7],fb:y()[b+8],wb:y()[b+9],Ma:y()[b+10],Xa:y()[b+11],zb:y()[b+12],Ab:y()[b+13]};a=Rb(a);if(!a||b.Xa)b=0;else if(a=a.getContext("webgl",b)){c=O(8);y()[c+4>>2]=M|0;var d={sb:c,attributes:b,version:b.fb,Ea:a};a.canvas&&(a.canvas.Fa=d);("undefined"===typeof b.Ma||b.Ma)&&Yb(d);b=c}else b=0;return b},z:function(){N.bb()},a:k||B.wasmMemory,C:function(a,b,c,d){if("undefined"===typeof SharedArrayBuffer)return G("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!a)return G("pthread_create called with a null thread pointer!"),
28;var f=[];if(E&&0===f.length)return gc(687865856,a,b,c,d);var g=0,h=0,l=0,m=0;if(b){var u=y()[b>>2];u+=81920;g=y()[b+8>>2];h=0!==y()[b+12>>2];if(0===y()[b+16>>2]){var t=y()[b+20>>2],q=y()[b+24>>2];l=b+20;m=b+24;var v=N.Ja?N.Ja:M|0;if(l||m)if(v)if(y()[v+12>>2]!==v)G("pthread_getschedparam attempted on thread "+v+", which does not point to a valid thread, or does not exist anymore!");else{var z=Atomics.load(A(),v+108+20>>2);v=Atomics.load(A(),v+108+24>>2);l&&(y()[l>>2]=z);m&&(y()[m>>2]=v)}else G("pthread_getschedparam called with a null thread pointer!");
l=y()[b+20>>2];m=y()[b+24>>2];y()[b+20>>2]=t;y()[b+24>>2]=q}else l=y()[b+20>>2],m=y()[b+24>>2]}else u=2097152;(b=0==g)?g=hc(16,u):(g-=u,assert(0<g));t=O(232);for(q=0;58>q;++q)A()[(t>>2)+q]=0;y()[a>>2]=t;y()[t+12>>2]=t;a=t+156;y()[a>>2]=a;c={za:g,Ba:u,Ia:b,Ra:l,Sa:m,detached:h,jb:c,Aa:t,gb:M|0,Ca:d,mb:f};E?(c.pb="spawnThread",postMessage(c,f)):db(c);return 0},i:bc};
(function(){function a(f,g){B.asm=f.exports;I=B.asm.M;za=g;E||(J--,B.monitorRunDependencies&&B.monitorRunDependencies(J),0==J&&(null!==Pa&&(clearInterval(Pa),Pa=null),K&&(f=K,K=null,f())))}function b(f){a(f.instance,f.module)}function c(f){return Promise.resolve().then(Ra).then(function(g){return WebAssembly.instantiate(g,d)}).then(f,function(g){G("failed to asynchronously prepare wasm: "+g);F(g)})}var d={a:ic};E||(assert(!E,"addRunDependency cannot be used in a pthread worker"),J++,B.monitorRunDependencies&&
B.monitorRunDependencies(J));if(B.instantiateWasm)try{return B.instantiateWasm(d,a)}catch(f){return G("Module.instantiateWasm callback failed with error: "+f),!1}(function(){return ya||"function"!==typeof WebAssembly.instantiateStreaming||Qa()||"function"!==typeof fetch?c(b):fetch(L,{credentials:"same-origin"}).then(function(f){return WebAssembly.instantiateStreaming(f,d).then(b,function(g){G("wasm streaming compile failed: "+g);G("falling back to ArrayBuffer instantiation");return c(b)})})})().catch(na);
return{}})();var fc=B.___wasm_call_ctors=function(){return(fc=B.___wasm_call_ctors=B.asm.N).apply(null,arguments)},O=B._malloc=function(){return(O=B._malloc=B.asm.O).apply(null,arguments)},Q=B._free=function(){return(Q=B._free=B.asm.P).apply(null,arguments)},Fb=B.___getTypeName=function(){return(Fb=B.___getTypeName=B.asm.Q).apply(null,arguments)};B.___embind_register_native_and_builtin_types=function(){return(B.___embind_register_native_and_builtin_types=B.asm.R).apply(null,arguments)};
B.___em_js__initPthreadsJS=function(){return(B.___em_js__initPthreadsJS=B.asm.S).apply(null,arguments)};
var ac=B._emscripten_get_global_libc=function(){return(ac=B._emscripten_get_global_libc=B.asm.T).apply(null,arguments)},Lb=B.stackSave=function(){return(Lb=B.stackSave=B.asm.U).apply(null,arguments)},fb=B.stackRestore=function(){return(fb=B.stackRestore=B.asm.V).apply(null,arguments)},Mb=B.stackAlloc=function(){return(Mb=B.stackAlloc=B.asm.W).apply(null,arguments)},eb=B._emscripten_stack_set_limits=function(){return(eb=B._emscripten_stack_set_limits=B.asm.X).apply(null,arguments)},hc=B._memalign=
function(){return(hc=B._memalign=B.asm.Y).apply(null,arguments)},bb=B.___pthread_tsd_run_dtors=function(){return(bb=B.___pthread_tsd_run_dtors=B.asm.Z).apply(null,arguments)},cb=B._emscripten_main_thread_process_queued_calls=function(){return(cb=B._emscripten_main_thread_process_queued_calls=B.asm._).apply(null,arguments)};B._emscripten_current_thread_process_queued_calls=function(){return(B._emscripten_current_thread_process_queued_calls=B.asm.$).apply(null,arguments)};
var $a=B._emscripten_register_main_browser_thread_id=function(){return($a=B._emscripten_register_main_browser_thread_id=B.asm.aa).apply(null,arguments)};B._emscripten_main_browser_thread_id=function(){return(B._emscripten_main_browser_thread_id=B.asm.ba).apply(null,arguments)};var Sa=B._do_emscripten_dispatch_to_thread=function(){return(Sa=B._do_emscripten_dispatch_to_thread=B.asm.ca).apply(null,arguments)};
B._emscripten_async_run_in_main_thread=function(){return(B._emscripten_async_run_in_main_thread=B.asm.da).apply(null,arguments)};B._emscripten_sync_run_in_main_thread=function(){return(B._emscripten_sync_run_in_main_thread=B.asm.ea).apply(null,arguments)};B._emscripten_sync_run_in_main_thread_0=function(){return(B._emscripten_sync_run_in_main_thread_0=B.asm.fa).apply(null,arguments)};
B._emscripten_sync_run_in_main_thread_1=function(){return(B._emscripten_sync_run_in_main_thread_1=B.asm.ga).apply(null,arguments)};B._emscripten_sync_run_in_main_thread_2=function(){return(B._emscripten_sync_run_in_main_thread_2=B.asm.ha).apply(null,arguments)};B._emscripten_sync_run_in_main_thread_xprintf_varargs=function(){return(B._emscripten_sync_run_in_main_thread_xprintf_varargs=B.asm.ia).apply(null,arguments)};
B._emscripten_sync_run_in_main_thread_3=function(){return(B._emscripten_sync_run_in_main_thread_3=B.asm.ja).apply(null,arguments)};var gc=B._emscripten_sync_run_in_main_thread_4=function(){return(gc=B._emscripten_sync_run_in_main_thread_4=B.asm.ka).apply(null,arguments)};B._emscripten_sync_run_in_main_thread_5=function(){return(B._emscripten_sync_run_in_main_thread_5=B.asm.la).apply(null,arguments)};
B._emscripten_sync_run_in_main_thread_6=function(){return(B._emscripten_sync_run_in_main_thread_6=B.asm.ma).apply(null,arguments)};B._emscripten_sync_run_in_main_thread_7=function(){return(B._emscripten_sync_run_in_main_thread_7=B.asm.na).apply(null,arguments)};
var Nb=B._emscripten_run_in_main_runtime_thread_js=function(){return(Nb=B._emscripten_run_in_main_runtime_thread_js=B.asm.oa).apply(null,arguments)},Tb=B.__emscripten_call_on_thread=function(){return(Tb=B.__emscripten_call_on_thread=B.asm.pa).apply(null,arguments)};B._emscripten_tls_init=function(){return(B._emscripten_tls_init=B.asm.qa).apply(null,arguments)};B.dynCall_ijiii=function(){return(B.dynCall_ijiii=B.asm.ra).apply(null,arguments)};var ab=B._main_thread_futex=9884;B.PThread=N;
B.PThread=N;B._pthread_self=bc;B.wasmMemory=k;B.ExitStatus=va;var jc;function va(a){this.name="ExitStatus";this.message="Program terminated with exit("+a+")";this.status=a}K=function kc(){jc||lc();jc||(K=kc)};
function lc(){function a(){if(!jc&&(jc=!0,B.calledRun=!0,!Aa)){Ua(La);E||Ua(Ma);ma(B);if(B.onRuntimeInitialized)B.onRuntimeInitialized();if(!E){if(B.postRun)for("function"==typeof B.postRun&&(B.postRun=[B.postRun]);B.postRun.length;){var b=B.postRun.shift();Na.unshift(b)}Ua(Na)}}}if(!(0<J)){if(!E){if(B.preRun)for("function"==typeof B.preRun&&(B.preRun=[B.preRun]);B.preRun.length;)Oa();Ua(Ka)}0<J||(B.setStatus?(B.setStatus("Running..."),setTimeout(function(){setTimeout(function(){B.setStatus("")},
1);a()},1)):a())}}B.run=lc;if(B.preInit)for("function"==typeof B.preInit&&(B.preInit=[B.preInit]);0<B.preInit.length;)B.preInit.pop()();E||(noExitRuntime=!0);E?N.cb():lc();


  return loadMP4H264Encoder.ready
}
);
})();
if (typeof exports === 'object' && typeof module === 'object')
  module.exports = loadMP4H264Encoder;
else if (typeof define === 'function' && define['amd'])
  define([], function() { return loadMP4H264Encoder; });
else if (typeof exports === 'object')
  exports["loadMP4H264Encoder"] = loadMP4H264Encoder;
